<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.0/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.0/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"Structure du projet","children":[{"content":"Importations de modules","children":[{"content":"<strong>os, re, requests, urllib.request</strong> : Gestion des opérations système, expressions régulières, requêtes HTTP et téléchargement de fichiers.","children":[],"payload":{"lines":"3,4"}},{"content":"<strong>BeautifulSoup (from bs4)</strong> : Analyse et manipulation de contenu HTML.","children":[],"payload":{"lines":"4,5"}},{"content":"<strong>Flask</strong> : Framework web pour créer des applications web en Python.","children":[],"payload":{"lines":"5,6"}},{"content":"<strong>SQLAlchemy, pandas</strong> : Gestion de la base de données SQLite et manipulation des données sous forme de DataFrame.","children":[],"payload":{"lines":"6,7"}},{"content":"<strong>pyngrok</strong> : Outil pour exposer localement des serveurs sur internet via des tunnels sécurisés.","children":[],"payload":{"lines":"7,8"}},{"content":"<strong>pynput (Key, Listener)</strong> : Gestion de l'enregistrement des frappes clavier (keylogger).","children":[],"payload":{"lines":"8,9"}},{"content":"<strong>shutil, subprocess, sys, time</strong> : Modules pour diverses opérations système, exécution de sous-processus, gestion des exceptions, et contrôle du temps.","children":[],"payload":{"lines":"9,10"}},{"content":"<strong>watchdog</strong> : Surveillance des fichiers et des répertoires pour des changements spécifiques.","children":[],"payload":{"lines":"10,11"}},{"content":"<strong>selenium</strong> : Automatisation des interactions avec les navigateurs web.","children":[],"payload":{"lines":"11,13"}}],"payload":{"lines":"2,3"}},{"content":"Configuration de Flask et de la base de données","children":[{"content":"<code>app = Flask(__name__)</code>","children":[{"content":"Crée une instance de l'application Flask.","children":[],"payload":{"lines":"16,18"}}],"payload":{"lines":"15,16"}},{"content":"<code>app.config[...]</code>","children":[{"content":"Configure la base de données SQLite et active SQLAlchemy pour la gestion des modèles de données.","children":[],"payload":{"lines":"19,21"}}],"payload":{"lines":"18,19"}},{"content":"<code>class DBInfo(db.Model)</code>","children":[{"content":"Définit le modèle de base de données <code>DB_INFO</code> avec les colonnes <code>id</code>, <code>site_name</code>, <code>username</code>, et <code>password</code>.","children":[],"payload":{"lines":"22,24"}}],"payload":{"lines":"21,22"}},{"content":"<code>with app.app_context(): db.create_all()</code>","children":[{"content":"Crée la table <code>DB_INFO</code> dans la base de données si elle n'existe pas déjà.","children":[],"payload":{"lines":"25,27"}}],"payload":{"lines":"24,25"}}],"payload":{"lines":"13,14"}},{"content":"Fonctionnalités du keylogger","children":[{"content":"<code>def on_press(key)</code>","children":[{"content":"Enregistre la touche pressée si elle est différente de la dernière.","children":[],"payload":{"lines":"30,32"}}],"payload":{"lines":"29,30"}},{"content":"<code>def write_file(keys)</code>","children":[{"content":"Enregistre les frappes de clavier dans un fichier <code>log.txt</code>.","children":[],"payload":{"lines":"33,35"}}],"payload":{"lines":"32,33"}},{"content":"<code>def on_release(key)</code>","children":[{"content":"Arrête le keylogger si la touche <code>esc</code> est pressée.","children":[],"payload":{"lines":"36,38"}}],"payload":{"lines":"35,36"}},{"content":"<code>def start_keylogger()</code>","children":[{"content":"Démarre le keylogger en écoutant les frappes clavier.","children":[],"payload":{"lines":"39,41"}}],"payload":{"lines":"38,39"}},{"content":"<code>def copy()</code>","children":[{"content":"Copie le script de keylogger dans un répertoire temporaire et le lance au démarrage.","children":[],"payload":{"lines":"42,44"}}],"payload":{"lines":"41,42"}},{"content":"<code>class KeyloggerEventHandler(FileSystemEventHandler)</code>","children":[{"content":"Gère la surveillance des modifications du fichier keylogger.","children":[],"payload":{"lines":"45,47"}}],"payload":{"lines":"44,45"}},{"content":"<code>def start_watchdog(script_path)</code>","children":[{"content":"Démarre un watchdog pour surveiller les modifications dans le fichier du keylogger.","children":[],"payload":{"lines":"48,50"}}],"payload":{"lines":"47,48"}},{"content":"<code>keylogger_thread = Thread(target=start_keylogger)</code>","children":[{"content":"Lance le keylogger dans un thread séparé.","children":[],"payload":{"lines":"51,53"}}],"payload":{"lines":"50,51"}}],"payload":{"lines":"27,28"}},{"content":"Fonctionnalités de clonage de site","children":[{"content":"<code>def clean_filename(filename)</code>","children":[{"content":"Nettoie le nom du fichier pour enlever les caractères spéciaux.","children":[],"payload":{"lines":"56,58"}}],"payload":{"lines":"55,56"}},{"content":"<code>def modify_form_action(html_content)</code>","children":[{"content":"Modifie l'attribut <code>action</code> de tous les formulaires HTML pour rediriger vers <code>/login</code>.","children":[],"payload":{"lines":"59,61"}}],"payload":{"lines":"58,59"}},{"content":"<code>def clone_site(url)</code>","children":[{"content":"Clone un site web en téléchargeant son HTML, ses images, ses feuilles de style, et ses scripts JavaScript.","children":[],"payload":{"lines":"62,63"}},{"content":"Modifie le contenu HTML pour rediriger les formulaires vers une page de capture (<code>/login</code>).","children":[],"payload":{"lines":"63,65"}}],"payload":{"lines":"61,62"}}],"payload":{"lines":"53,54"}},{"content":"Routes Flask","children":[{"content":"<code>@app.route('/cloned_site/&lt;path:filename&gt;')</code>","children":[{"content":"Sert les fichiers statiques (HTML, images, CSS, JS) du site cloné.","children":[],"payload":{"lines":"68,70"}}],"payload":{"lines":"67,68"}},{"content":"<code>@app.route('/log-key', methods=['POST'])</code>","children":[{"content":"Enregistre les frappes clavier envoyées par le script keylogger intégré dans le site cloné.","children":[],"payload":{"lines":"71,73"}}],"payload":{"lines":"70,71"}},{"content":"<code>@app.route('/')</code>","children":[{"content":"Sert la page d'accueil où l'utilisateur peut entrer l'URL à cloner.","children":[],"payload":{"lines":"74,76"}}],"payload":{"lines":"73,74"}},{"content":"<code>@app.route('/login', methods=['POST'])</code>","children":[{"content":"Capture les informations de connexion (nom d'utilisateur et mot de passe) saisies par l'utilisateur sur le site cloné.","children":[],"payload":{"lines":"77,78"}},{"content":"Enregistre ces informations dans la base de données.","children":[],"payload":{"lines":"78,80"}}],"payload":{"lines":"76,77"}},{"content":"<code>@app.route('/error.html', methods=['GET','POST'])</code>","children":[{"content":"Affiche une page d'erreur après la capture des informations de connexion.","children":[],"payload":{"lines":"81,83"}}],"payload":{"lines":"80,81"}},{"content":"<code>@app.route('/clone', methods=['POST'])</code>","children":[{"content":"Reçoit l'URL du site à cloner et lance le processus de clonage.","children":[],"payload":{"lines":"84,85"}},{"content":"Retourne un lien vers le site cloné.","children":[],"payload":{"lines":"85,87"}}],"payload":{"lines":"83,84"}}],"payload":{"lines":"65,66"}},{"content":"Démarrage de l'application","children":[{"content":"<code>if __name__ == \"__main__\": app.run(debug=True, port=5000)</code>","children":[{"content":"Démarre l'application Flask en mode débogage sur le port 5000.","children":[],"payload":{"lines":"90,91"}}],"payload":{"lines":"89,90"}}],"payload":{"lines":"87,88"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
