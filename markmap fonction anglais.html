<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.0/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.0/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"Project Structure","children":[{"content":"Module Imports","children":[{"content":"<strong>os, re, requests, urllib.request</strong>: Manages system operations, regular expressions, HTTP requests, and file downloads.","children":[],"payload":{"lines":"3,4"}},{"content":"<strong>BeautifulSoup (from bs4)</strong>: Parses and manipulates HTML content.","children":[],"payload":{"lines":"4,5"}},{"content":"<strong>Flask</strong>: Web framework for creating web applications in Python.","children":[],"payload":{"lines":"5,6"}},{"content":"<strong>SQLAlchemy, pandas</strong>: Manages the SQLite database and handles data as DataFrames.","children":[],"payload":{"lines":"6,7"}},{"content":"<strong>pyngrok</strong>: Tool to expose local servers to the internet via secure tunnels.","children":[],"payload":{"lines":"7,8"}},{"content":"<strong>pynput (Key, Listener)</strong>: Handles keyboard input logging (keylogger).","children":[],"payload":{"lines":"8,9"}},{"content":"<strong>shutil, subprocess, sys, time</strong>: Modules for various system operations, subprocess execution, exception handling, and time control.","children":[],"payload":{"lines":"9,10"}},{"content":"<strong>watchdog</strong>: Monitors files and directories for specific changes.","children":[],"payload":{"lines":"10,11"}},{"content":"<strong>selenium</strong>: Automates interactions with web browsers.","children":[],"payload":{"lines":"11,13"}}],"payload":{"lines":"2,3"}},{"content":"Flask and Database Configuration","children":[{"content":"<code>app = Flask(__name__)</code>","children":[{"content":"Creates an instance of the Flask application.","children":[],"payload":{"lines":"16,18"}}],"payload":{"lines":"15,16"}},{"content":"<code>app.config[...]</code>","children":[{"content":"Configures the SQLite database and enables SQLAlchemy for data model management.","children":[],"payload":{"lines":"19,21"}}],"payload":{"lines":"18,19"}},{"content":"<code>class DBInfo(db.Model)</code>","children":[{"content":"Defines the <code>DB_INFO</code> database model with the columns <code>id</code>, <code>site_name</code>, <code>username</code>, and <code>password</code>.","children":[],"payload":{"lines":"22,24"}}],"payload":{"lines":"21,22"}},{"content":"<code>with app.app_context(): db.create_all()</code>","children":[{"content":"Creates the <code>DB_INFO</code> table in the database if it doesn't already exist.","children":[],"payload":{"lines":"25,27"}}],"payload":{"lines":"24,25"}}],"payload":{"lines":"13,14"}},{"content":"Keylogger Functionality","children":[{"content":"<code>def on_press(key)</code>","children":[{"content":"Logs the pressed key if it differs from the last key.","children":[],"payload":{"lines":"30,32"}}],"payload":{"lines":"29,30"}},{"content":"<code>def write_file(keys)</code>","children":[{"content":"Writes the key presses to a <code>log.txt</code> file.","children":[],"payload":{"lines":"33,35"}}],"payload":{"lines":"32,33"}},{"content":"<code>def on_release(key)</code>","children":[{"content":"Stops the keylogger if the <code>esc</code> key is pressed.","children":[],"payload":{"lines":"36,38"}}],"payload":{"lines":"35,36"}},{"content":"<code>def start_keylogger()</code>","children":[{"content":"Starts the keylogger by listening to key presses.","children":[],"payload":{"lines":"39,41"}}],"payload":{"lines":"38,39"}},{"content":"<code>def copy()</code>","children":[{"content":"Copies the keylogger script to a temporary directory and launches it at startup.","children":[],"payload":{"lines":"42,44"}}],"payload":{"lines":"41,42"}},{"content":"<code>class KeyloggerEventHandler(FileSystemEventHandler)</code>","children":[{"content":"Handles monitoring of changes to the keylogger file.","children":[],"payload":{"lines":"45,47"}}],"payload":{"lines":"44,45"}},{"content":"<code>def start_watchdog(script_path)</code>","children":[{"content":"Starts a watchdog to monitor changes in the keylogger file.","children":[],"payload":{"lines":"48,50"}}],"payload":{"lines":"47,48"}},{"content":"<code>keylogger_thread = Thread(target=start_keylogger)</code>","children":[{"content":"Starts the keylogger in a separate thread.","children":[],"payload":{"lines":"51,53"}}],"payload":{"lines":"50,51"}}],"payload":{"lines":"27,28"}},{"content":"Website Cloning Functionality","children":[{"content":"<code>def clean_filename(filename)</code>","children":[{"content":"Cleans the filename to remove special characters.","children":[],"payload":{"lines":"56,58"}}],"payload":{"lines":"55,56"}},{"content":"<code>def modify_form_action(html_content)</code>","children":[{"content":"Modifies the <code>action</code> attribute of all HTML forms to redirect to <code>/login</code>.","children":[],"payload":{"lines":"59,61"}}],"payload":{"lines":"58,59"}},{"content":"<code>def clone_site(url)</code>","children":[{"content":"Clones a website by downloading its HTML, images, stylesheets, and JavaScript.","children":[],"payload":{"lines":"62,63"}},{"content":"Modifies the HTML content to redirect forms to a capture page (<code>/login</code>).","children":[],"payload":{"lines":"63,65"}}],"payload":{"lines":"61,62"}}],"payload":{"lines":"53,54"}},{"content":"Flask Routes","children":[{"content":"<code>@app.route('/cloned_site/&lt;path:filename&gt;')</code>","children":[{"content":"Serves static files (HTML, images, CSS, JS) from the cloned website.","children":[],"payload":{"lines":"68,70"}}],"payload":{"lines":"67,68"}},{"content":"<code>@app.route('/log-key', methods=['POST'])</code>","children":[{"content":"Logs keystrokes sent by the embedded keylogger script in the cloned site.","children":[],"payload":{"lines":"71,73"}}],"payload":{"lines":"70,71"}},{"content":"<code>@app.route('/')</code>","children":[{"content":"Serves the homepage where the user can enter the URL to clone.","children":[],"payload":{"lines":"74,76"}}],"payload":{"lines":"73,74"}},{"content":"<code>@app.route('/login', methods=['POST'])</code>","children":[{"content":"Captures login information (username and password) entered by the user on the cloned site.","children":[],"payload":{"lines":"77,78"}},{"content":"Stores this information in the database.","children":[],"payload":{"lines":"78,80"}}],"payload":{"lines":"76,77"}},{"content":"<code>@app.route('/error.html', methods=['GET','POST'])</code>","children":[{"content":"Displays an error page after capturing login information.","children":[],"payload":{"lines":"81,83"}}],"payload":{"lines":"80,81"}},{"content":"<code>@app.route('/clone', methods=['POST'])</code>","children":[{"content":"Receives the URL of the website to be cloned and initiates the cloning process.","children":[],"payload":{"lines":"84,85"}},{"content":"Returns a link to the cloned website.","children":[],"payload":{"lines":"85,87"}}],"payload":{"lines":"83,84"}}],"payload":{"lines":"65,66"}},{"content":"Application Startup","children":[{"content":"<code>if __name__ == \"__main__\": app.run(debug=True, port=5000)</code>","children":[{"content":"Starts the Flask application in debug mode on port 5000.","children":[],"payload":{"lines":"90,91"}}],"payload":{"lines":"89,90"}}],"payload":{"lines":"87,88"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
